# ===== Общие настройки =====
Port 22                           # Номер порта для SSH. По умолчанию: 22.
# Рекомендуется сменить на нестандартный порт для повышения безопасности, например: 2222.
# Port 2222

AddressFamily inet                # Только IPv4 (если IPv6 не используется, это ускоряет работу).
# Для поддержки и IPv4, и IPv6 используйте: AddressFamily any

ListenAddress 0.0.0.0             # SSH будет слушать на всех интерфейсах.
# Можно указать конкретный IP: ListenAddress 192.168.1.100

Protocol 2                        # Использовать только протокол SSH версии 2 (безопаснее, чем версия 1).

# ===== Аутентификация =====
PermitRootLogin no                # Запрет прямого входа под root. 
# Лучше использовать sudo для повышения безопасности.
PasswordAuthentication no         # Запрет входа по паролю. Используйте только ключи.
PubkeyAuthentication yes          # Включить аутентификацию с использованием публичных ключей.

AuthorizedKeysFile .ssh/authorized_keys  # Путь к файлу публичных ключей.

PermitEmptyPasswords no           # Запрет входа с пустыми паролями.

# ===== Логирование и отладка =====
LogLevel VERBOSE                  # Уровень логирования (INFO, VERBOSE, DEBUG и т.д.).
# VERBOSE помогает анализировать проблемы с аутентификацией.

# ===== Ограничение доступа =====
MaxAuthTries 3                    # Максимальное количество попыток ввода пароля.
MaxSessions 2                     # Ограничить количество одновременных сессий на пользователя.

AllowUsers user1 user2            # Разрешить доступ только указанным пользователям.
# AllowGroups sshusers             # Или ограничить доступ по группам.

# ===== Оптимизация безопасности =====
PermitTunnel no                   # Запрет туннелирования через SSH (если не требуется).
AllowAgentForwarding no           # Запрет перенаправления SSH-агента.
X11Forwarding no                  # Запрет X11 переадресации (графический интерфейс через SSH).
UseDNS no                         # Отключить обратное разрешение DNS для ускорения подключения.

# ===== Сетевые настройки =====
ClientAliveInterval 300           # Отправлять пинг клиенту каждые 300 секунд (5 минут).
ClientAliveCountMax 2             # Закрывать соединение после 2 пропущенных пингов.

LoginGraceTime 60                 # Время (в секундах), отведённое на вход в систему (по умолчанию 120).

# ===== Криптография =====
Ciphers aes256-ctr,aes192-ctr,aes128-ctr  # Шифры для соединений (современные и безопасные).
MACs hmac-sha2-256,hmac-sha2-512         # Алгоритмы контроля целостности.
KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256
                                         # Алгоритмы обмена ключами.

# ===== Использование chroot (ограничение среды) =====
# Match Group sftpusers
#     ChrootDirectory /home/%u
#     ForceCommand internal-sftp
#     AllowTcpForwarding no
#     X11Forwarding no
